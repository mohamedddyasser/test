<odoo>
    <data>

        <record id="paperformat_credit_note_custom" model="report.paperformat">
            <field name="name">Credit Note Custom</field>
            <field name="default" eval="True"/>
            <field name="format">A4</field>
            <field name="page_height">0</field>
            <field name="page_width">0</field>
            <field name="orientation">Portrait</field>
            <field name="margin_top">10</field>
            <field name="margin_bottom">40</field>
            <field name="margin_left">7</field>
            <field name="margin_right">7</field>
            <field name="header_line" eval="False"/>
            <field name="header_spacing">35</field>
            <field name="dpi">90</field>
        </record>

        <record id="account_tax_credit_note_report" model="ir.actions.report">
            <field name="name">TAX CREDIT NOTE</field>
            <field name="model">account.move</field>
            <field name="report_type">qweb-pdf</field>
            <field name="report_name">abra_credit_note.report_invoice_credit_note</field>
            <field name="report_file">abra_credit_note.report_invoice_credit_note</field>
            <field name="print_report_name">(object._get_report_base_filename())</field>
            <field name="attachment"/>
            <field name="binding_model_id" ref="account.model_account_move"/>
            <field name="binding_type">report</field>
            <field name="paperformat_id" ref="abra_credit_note.paperformat_credit_note_custom"/>
        </record>


        <template id="external_layout_standard_inherited_credit">
            <div>
                <t t-out="0"/>
            </div>

            <div t-attf-class="footer o_standard_footer o_company_#{company.id}_layout">
                <div>
                    <table class="table-borderless" style="border: none;">
                        <tr>
                            <td width='623' colspan='4'
                                style='border: none;width:600px;text-align:left;border-top:none;border-bottom:none;'>
                                <img t-att-src="image_data_uri(o.company_id.logo)" alt="ABRA Logo" class="logo"
                                     style="height:80px;margin-top:25px;"/>
                            </td>
                            <td width='623' colspan='4'
                                style='border: none;text-align:right;font-size:15px;font-family:serif'>
                                <div width='623'>
                                    <span style="font-weight: bold;font-size:13px;width:600px;">
                                        <t t-esc="o.company_id.name"/>
                                    </span>
                                </div>
                                <div width='623'>
                                    <span style="width:600px;">
                                        <t t-if="o.company_id.street">
                                            <t t-esc="o.company_id.street"/>
                                        </t>
                                        <t t-if="o.company_id.street2">
                                            <t t-esc="o.company_id.street2"/>
                                        </t>
                                        <t t-if="o.company_id.city">
                                            <t t-esc="o.company_id.city"/>
                                        </t>
                                    </span>
                                </div>
                                <div width='623'>
                                    <span>
                                        Post Box:
                                        <t t-esc="o.company_id.zip"/>
                                        <t t-esc="o.company_id.state_id.name"/>
                                        <t t-esc="o.company_id.country_id.name"/>
                                    </span>
                                </div>
                            </td>
                            <td style='border: none;text-align:right;'>
                                <span>
                                    <img alt="location"
                                         src="/abra_accounting_enhanecment/static/description/location.png"
                                         style="height:20px;margin-top:35px;"/>
                                </span>
                            </td>
                            <td width='623' colspan='4'
                                style='border: none;text-align:right;font-size:14px;font-family:"Segoe UI";width:600px;line-height:1.8;'>
                                <span>
                                    <t t-esc="o.company_id.email"/>
                                </span>
                                <br/>
                                <span>
                                    <t t-esc="o.company_id.phone"/>
                                </span>
                                <br/>
                                <span>
                                    <t t-esc="o.company_id.mobile"/>
                                </span>
                                <br/>
                                <t t-if="o.company_id.website">
                                    <span>
                                        <t t-esc="o.company_id.website.replace('http://', '')"/>
                                    </span>
                                </t>
                            </td>
                            <td style='border: none;text-align:center;'>
                                <span>
                                    <img alt="email" src="/abra_accounting_enhanecment/static/description/email.png"
                                         style="height:18px;"/>
                                </span>
                                <span>
                                    <img alt="telephreport_invoice_new_edit_paymentone"
                                         src="/abra_accounting_enhanecment/static/description/telephone.png"
                                         style="height:18px;"/>
                                </span>
                                <span>
                                    <img alt="phone" src="/abra_accounting_enhanecment/static/description/phone.png"
                                         style="height:18px;"/>
                                </span>
                                <span>
                                    <img alt="website" src="/abra_accounting_enhanecment/static/description/web.png"
                                         style="height:18px;"/>
                                </span>
                            </td>
                        </tr>
                    </table>
                </div>
                <div class="text-end" style="font-size:14px;">
                    <div>
                        Page:
                        <span class="page"/>
                        /
                        <span class="topage"/>
                    </div>
                </div>
            </div>
        </template>



        <template id="report_invoice_credit_note">
            <t t-call="web.html_container">
                <t t-foreach="docs" t-as="o">
                    <t t-set="lang" t-value="o.partner_id.lang"/>
                    <t t-call="abra_credit_note.report_invoice_credit_note_template" t-lang="lang"/>
                </t>
            </t>
        </template>





        <template id="tax_groups_totals">

            <t t-foreach="tax_totals['groups_by_subtotal'][subtotal_to_show]" t-as="amount_by_group">
                    <t t-if="len(tax_totals['groups_by_subtotal'][subtotal_to_show]) > 1">

                            <span t-esc="amount_by_group['tax_group_name']"/>

                    </t>
                    <t t-else="">
                        <span class="text-nowrap" t-esc="amount_by_group['tax_group_name']"/>

                    </t>
            </t>
        </template>


        <template id="report_invoice_credit_note_template">
            <t t-set="o" t-value="o.with_context(lang=lang)"/>
            <t t-set="forced_vat"
               t-value="o.fiscal_position_id.foreign_vat"/>
            <t t-if="not o" t-set="o" t-value="doc"/>

            <t t-if="not company">
                <!-- Multicompany -->
                <t t-if="company_id">
                    <t t-set="company" t-value="company_id"/>
                </t>
                <t t-elif="o and 'company_id' in o and o.company_id.sudo()">
                    <t t-set="company" t-value="o.company_id.sudo()"/>
                </t>
                <t t-else="else">
                    <t t-set="company" t-value="res_company"/>
                </t>
            </t>
            <t t-call="abra_credit_note.external_layout_standard_inherited_credit">

                <div>
                    <h2 align="center">
                        TAX CREDIT NOTE
                    </h2>
                </div>
                <br/>
                <div class="page" style="font-family:'lato';">
                    <table class="table-borderless" style="border: none; width: 100%;">
                        <tr>
                            <td style='border: none;text-align:left; width: 40%;'>
                                <div>
                                    <spans style="font-weight: bold;">Bill To</spans>
                                </div>
                                <div style="font-weight: bold;">
                                    <span>
                                        <t t-esc="o.partner_id.parent_id.name or o.partner_id.name"/>
                                    </span>
                                </div>
                                <div>
                                    <t t-if="o.partner_id.parent_id">
                                        <span>
                                            <t t-esc="o.partner_id.parent_id.contact_address.replace(o.partner_id.parent_id.name,'')"/>
                                        </span>
                                    </t>
                                    <t t-else="">
                                        <span>
                                            <t t-esc="o.partner_id.contact_address.replace(o.partner_id.name,'')"/>
                                        </span>
                                    </t>
                                </div>
                                <div>
                                    <span>Tel #
                                        <t t-esc="o.partner_id.parent_id.phone or o.partner_id.phone"/>
                                    </span>
                                </div>
                                <div>
                                    <span>TRN:
                                        <t t-esc="o.partner_id.parent_id.trn or o.partner_id.trn"/>
                                    </span>
                                </div>
                                <br/>
                                <div>
                                    <span>
                                        Kind Attn:
                                        <t t-if="o.partner_id.parent_id">
                                            <span>
                                                <t t-esc="o.partner_id.name"/>
                                            </span>
                                        </t>
                                    </span>
                                </div>
                            </td>
                            <td style='border: none;text-align:left; width: 20%;'>
                            </td>
                            <td style='border: none;text-align:left; width: 40%;'>
                                <table style="width: 100%;border: 1px solid black;border-collapse: collapse;">
                                    <tr style='text-align:left;'>
                                        <td style="background-color:#d3d3d3;font-weight: bold;width: 50%;border: 1px solid black;">
                                            <span>INV #</span>
                                        </td>
                                        <td style="border: 1px solid black;">
                                            <span>
                                                <t t-esc="o.name"/>
                                            </span>
                                        </td>
                                    </tr>
                                    <tr style='text-align:left;'>
                                        <td style="background-color:#d3d3d3;font-weight: bold;width: 50%;border: 1px solid black;">
                                            <span>Date</span>
                                        </td>
                                        <td style="border: 1px solid black;">
                                            <t t-if="o.invoice_date">
                                                <span>TAX INVOICE
                                                    <t t-esc="o.invoice_date.strftime('%d-%m-%Y')"/>
                                                </span>
                                            </t>
                                        </td>
                                    </tr>
                                    <tr style='text-align:left;'>
                                        <td style="background-color:#d3d3d3;font-weight: bold;width: 50%;border: 1px solid black;">
                                            <span>Job#</span>
                                        </td>
                                        <td style="border: 1px solid black;">
                                            <span>
                                                <span>
                                                    <t t-esc="o.job"/>
                                                </span>
                                            </span>
                                        </td>
                                    </tr>
                                    <tr style='text-align:left;'>
                                        <td style="background-color:#d3d3d3;font-weight: bold;width: 50%;border: 1px solid black;">
                                            <span>TRN</span>
                                        </td>
                                        <td style="border: 1px solid black;">
                                            <span>
                                                <t t-esc="o.company_id.vat"/>
                                            </span>
                                        </td>
                                    </tr>
                                </table>

                            </td>
                        </tr>
                    </table>
                    <div style="width:100%;">
                        <table style="border: 1px solid black; text-align: center;width:100%;border-collapse: collapse;font-size:14px;">
                            <tr style="font-weight: bold;">
                                <th style="width:30%;background-color:#d3d3d3;border: 1px solid black;padding: 10px;">
                                    Order Ref
                                </th>
                                <th style="width:25%;background-color:#d3d3d3;border: 1px solid black;padding: 10px;">
                                    Payment Terms
                                </th>
                                <th style="width:25%;background-color:#d3d3d3;border: 1px solid black;padding: 10px;">
                                    PROJECT
                                </th>
                            </tr>
                            <tr style="height:40px;">

                                <td style="border: 1px solid black;">
                                    <span>
                                        <t t-esc="o.ref"/>
                                    </span>
                                </td>
                                <td style="border: 1px solid black;">
                                    <span>
                                        <t t-esc="o.invoice_payment_term_id.name"/>
                                    </span>
                                </td>
                                <td style="border: 1px solid black;">
                                    <span>
                                        <t t-esc="o.analytic_account_id.name"/>
                                    </span>
                                </td>
                            </tr>
                        </table>
                    </div>
                    <br/>
                    <div style="width:100%;">
                        <table style="width: 100%;border-collapse: collapse;width:100%;font-size:14px;">
                            <tr>
                                <th rowspan="2" class="center-align"
                                    style="border: 1px solid black;padding: 8px;text-align: center;background-color:#d3d3d3;width:5%;">
                                    Sl. #
                                </th>
                                <th rowspan="2" class="center-align"
                                    style="border: 1px solid black;padding: 8px;text-align: center;background-color:#d3d3d3;width:30%;">
                                    Description
                                </th>
                                <th rowspan="2" class="center-align"
                                    style="border: 1px solid black;padding: 8px;text-align: center;background-color:#d3d3d3;width:10%;">
                                    Claim
                                </th>
                                <th rowspan="2" class="center-align"
                                    style="border: 1px solid black;padding: 8px;text-align: center;background-color:#d3d3d3;width:10%;">
                                    Qty
                                </th>
                                <th rowspan="2" class="center-align"
                                    style="border: 1px solid black;padding: 8px;text-align: center;background-color:#d3d3d3;width:10%;">
                                    Rate
                                </th>
                                <th rowspan="2" class="center-align"
                                    style="border: 1px solid black;padding: 8px;text-align: center;background-color:#d3d3d3;width:10%;">
                                    Value
                                </th>
                                <th colspan="2" class="center-align"
                                    style="border: 1px solid black;padding: 8px;text-align: center;background-color:#d3d3d3;width:10%;">
                                    VAT
                                </th>
                                <th class="center-align"
                                    style="border: 1px solid black;padding: 8px;text-align: center;background-color:#d3d3d3;width:15%;">
                                    Total Value
                                </th>
                            </tr>
                            <tr>
                                <th class="center-align"
                                    style="border: 1px solid black;padding: 8px;text-align: center;background-color:#d3d3d3;">
                                    Rate
                                </th>
                                <th class="center-align"
                                    style="border: 1px solid black;padding: 8px;text-align: center;background-color:#d3d3d3;">
                                    Amount (<span t-field="o.currency_id.name"/>)
                                </th>
                                <th class="center-align"
                                    style="border: 1px solid black;padding: 8px;text-align: center;background-color:#d3d3d3;">
                                    Amount (<span t-field="o.currency_id.name"/>)
                                </th>
                            </tr>







                            <t t-set="index" t-value="1"/>
                            <t t-set="value" t-value="0"/>
                            <t t-set="vat_amount" t-value="0"/>
                            <t t-set="total_amount" t-value="0"/>
                            <t t-set="total_project_value" t-value="0"/>
                            <t t-set="vat_rate_name" t-value="Zero"/>
                            <t t-set="goods"
                               t-value="o.invoice_line_ids.filtered(lambda x : x.product_id.detailed_type == 'consu')"/>
                            <t t-set="services"
                               t-value="o.invoice_line_ids.filtered(lambda x : x.product_id.detailed_type == 'service')"/>

                            <t>
                                <tr>
                                    <td class="center-align"
                                        style="border-left: 1px solid black;border-right: 1px solid black;padding: 8px;text-align: center;">
                                        <t t-esc="index"/>
                                    </td>
                                    <td style="border-left: 1px solid black;border-right: 1px solid black;padding: 8px;text-align: left;font-size:13px;">
                                        Credit Note Issued against .................
                                        <br/>
                                        .............................................................

                                    </td>
                                    <td class="center-align"
                                        style="border-left: 1px solid black;border-right: 1px solid black;padding: 8px;text-align: center;">

                                    </td>
                                    <td class="center-align"
                                        style="border-left: 1px solid black;border-right: 1px solid black;padding: 8px;text-align: center;">
                                        <!--                                    <t t-esc="sum(goods.mapped('quantity'))"/>-->
<!--                                        <span>-->
<!--                                            <t t-esc="goods.mapped('product_uom_id')[0].name"/>-->
<!--                                        </span>-->
                                    </td>
                                    <td class="right-align"
                                        style="border-left: 1px solid black;border-right: 1px solid black;padding: 8px;text-align: right;">
<!--                                        <t t-esc="'{:,}'.format(int(sum(goods.mapped('price_unit'))))"/>-->
                                    </td>
                                    <td class="right-align"
                                        style="border-left: 1px solid black;border-right: 1px solid black;padding: 8px;text-align: right;">
<!--                                        <t t-esc="'{:,}'.format(int(sum(goods.mapped('price_subtotal'))))"/>-->
                                    </td>
                                    <td class="center-align"
                                        style="border-left: 1px solid black;border-right: 1px solid black;padding: 8px;text-align: right;">
<!--                                        <t t-if="goods.filtered(lambda x: x.tax_ids)">-->
<!--                                            <t t-set="vat_rate_name"-->
<!--                                               t-value="goods.filtered(lambda x: x.tax_ids)[0].tax_ids.name"/>-->
<!--                                            <t t-esc="int(goods.filtered(lambda x: x.tax_ids)[0].tax_ids.amount)"/>%-->
<!--                                        </t>-->
<!--                                        <t t-else="">-->
<!--                                            0 %-->
<!--                                        </t>-->
                                    </td>
                                    <td class="right-align"
                                        style="border-left: 1px solid black;border-right: 1px solid black;padding: 8px;text-align: right;">
<!--                                        <t t-esc="'{:,}'.format(int(sum(goods.mapped('l10n_ae_vat_amount'))))"/>-->
                                    </td>
                                    <td class="right-align"
                                        style="border-left: 1px solid black;border-right: 1px solid black;padding: 8px;text-align: right;">
<!--                                        <t t-esc="'{:,}'.format(int(sum(goods.mapped('price_total'))))"/>-->
                                    </td>
                                    <t t-set="index" t-value="index + 1"/>
                                    <t t-set="value" t-value="value + int(sum(goods.mapped('price_subtotal')))"/>
                                    <t t-set="vat_amount"
                                       t-value="vat_amount + sum(goods.mapped('l10n_ae_vat_amount'))"/>
                                    <t t-set="total_amount"
                                       t-value="int(total_amount) + int(sum(goods.mapped('price_total')))"/>
                                    <t t-set="total_project_value"
                                       t-value="total_project_value + int(sum(goods.mapped('price_subtotal')))"/>
                                </tr>

                            </t>


                            <tr>
                                    <td class="center-align"
                                        style="border-left: 1px solid black;border-right: 1px solid black;padding: 8px;text-align: center;">

                                    </td>
                                    <td style="border-left: 1px solid black;border-right: 1px solid black;padding: 8px;text-align: left;font-size:13px;">
                                        Invoice Value
                                    </td>
                                    <td class="center-align"
                                        style="border-left: 1px solid black;border-right: 1px solid black;padding: 8px;text-align: center;">

                                    </td>
                                    <td class="center-align"
                                        style="border-left: 1px solid black;border-right: 1px solid black;padding: 8px;text-align: center;">
                                        LS
                                    </td>
                                    <td class="right-align"
                                        style="border-left: 1px solid black;border-right: 1px solid black;padding: 8px;text-align: right;">
                                        <span t-esc="'{0:,.2f}'.format(o.credit_move_id.amount_untaxed)"/>

                                    </td>
                                    <td class="right-align"
                                        style="border-left: 1px solid black;border-right: 1px solid black;padding: 8px;text-align: right;">
                                        <span t-esc="'{0:,.2f}'.format(o.credit_move_id.amount_untaxed)"/>


                                    </td>
                                    <td class="center-align"
                                        style="border-left: 1px solid black;border-right: 1px solid black;padding: 8px;text-align: right;">
                                        <t t-set="tax_totals" t-value="o.credit_move_id.tax_totals"/>
                                        <t t-foreach="tax_totals['subtotals']" t-as="subtotal">
                                            <t t-set="subtotal_to_show" t-value="subtotal['name']"/>
                                            <t t-call="abra_credit_note.tax_groups_totals"/>
                                        </t>






                                    </td>
                                    <td class="right-align"
                                        style="border-left: 1px solid black;border-right: 1px solid black;padding: 8px;text-align: right;">
                                        <span t-esc="'{0:,.2f}'.format(o.credit_move_id.amount_tax)"/>

                                    </td>
                                    <td class="right-align"
                                        style="border-left: 1px solid black;border-right: 1px solid black;padding: 8px;text-align: right;">
                                        <span t-esc="'{0:,.2f}'.format(o.credit_move_id.amount_untaxed)"/>

                                    </td>


                                    <t t-set="index" t-value="index + 1"/>
                                    <t t-set="value" t-value="value + int(sum(goods.mapped('price_subtotal')))"/>
                                    <t t-set="vat_amount"
                                       t-value="vat_amount + sum(goods.mapped('l10n_ae_vat_amount'))"/>
                                    <t t-set="total_amount"
                                       t-value="int(total_amount) + int(sum(goods.mapped('price_total')))"/>
                                    <t t-set="total_project_value"
                                       t-value="total_project_value + int(sum(goods.mapped('price_subtotal')))"/>
                                </tr>


                            <tr>
                                    <td class="center-align"
                                        style="border-left: 1px solid black;border-right: 1px solid black;padding: 8px;text-align: center;">

                                    </td>
                                    <td style="border-left: 1px solid black;border-right: 1px solid black;padding: 8px;text-align: left;font-size:13px;">
                                        Revised Value
                                    </td>
                                    <td class="center-align"
                                        style="border-left: 1px solid black;border-right: 1px solid black;padding: 8px;text-align: center;">

                                    </td>
                                    <td class="center-align"
                                        style="border-left: 1px solid black;border-right: 1px solid black;padding: 8px;text-align: center;">
                                        LS
                                    </td>
                                    <td class="right-align"
                                        style="border-left: 1px solid black;border-right: 1px solid black;padding: 8px;text-align: right;">
                                        <span t-esc="'{0:,.2f}'.format(o.amount_untaxed)"/>

                                    </td>
                                    <td class="right-align"
                                        style="border-left: 1px solid black;border-right: 1px solid black;padding: 8px;text-align: right;">
                                        <span t-esc="'{0:,.2f}'.format(o.amount_untaxed)"/>


                                    </td>
                                    <td class="center-align"
                                        style="border-left: 1px solid black;border-right: 1px solid black;padding: 8px;text-align: right;">
                                          <t t-set="tax_totals" t-value="o.tax_totals"/>
                                        <t t-foreach="tax_totals['subtotals']" t-as="subtotal">
                                            <t t-set="subtotal_to_show" t-value="subtotal['name']"/>
                                            <t t-call="abra_credit_note.tax_groups_totals"/>
                                        </t>


                                    </td>
                                    <td class="right-align"
                                        style="border-left: 1px solid black;border-right: 1px solid black;padding: 8px;text-align: right;">
                                        <span t-esc="'{0:,.2f}'.format(o.amount_tax)"/>

                                    </td>
                                    <td class="right-align"
                                        style="border-left: 1px solid black;border-right: 1px solid black;padding: 8px;text-align: right;">

                                        <span t-esc="'{0:,.2f}'.format(o.amount_total)"/>

                                    </td>


                                    <t t-set="index" t-value="index + 1"/>
                                    <t t-set="value" t-value="value + int(sum(goods.mapped('price_subtotal')))"/>
                                    <t t-set="vat_amount"
                                       t-value="vat_amount + sum(goods.mapped('l10n_ae_vat_amount'))"/>
                                    <t t-set="total_amount"
                                       t-value="int(total_amount) + int(sum(goods.mapped('price_total')))"/>
                                    <t t-set="total_project_value"
                                       t-value="total_project_value + int(sum(goods.mapped('price_subtotal')))"/>
                                </tr>

                            <tr>
                                    <td class="center-align"
                                        style="height:150px;border-left: 1px solid black;border-right: 1px solid black;padding: 8px;text-align: center;">

                                    </td>
                                    <td style="border-left: 1px solid black;border-right: 1px solid black;padding: 8px;text-align: left;font-size:13px;">
                                    </td>
                                    <td class="center-align"
                                        style="border-left: 1px solid black;border-right: 1px solid black;padding: 8px;text-align: center;">

                                    </td>
                                    <td class="center-align"
                                        style="border-left: 1px solid black;border-right: 1px solid black;padding: 8px;text-align: center;">

                                    </td>
                                    <td class="right-align"
                                        style="border-left: 1px solid black;border-right: 1px solid black;padding: 8px;text-align: right;">

                                    </td>
                                    <td class="right-align"
                                        style="border-left: 1px solid black;border-right: 1px solid black;padding: 8px;text-align: right;">


                                    </td>
                                    <td class="center-align"
                                        style="border-left: 1px solid black;border-right: 1px solid black;padding: 8px;text-align: right;">
                                          <t t-set="tax_totals" t-value="o.tax_totals"/>

                                    </td>
                                    <td class="right-align"
                                        style="border-left: 1px solid black;border-right: 1px solid black;padding: 8px;text-align: right;">

                                    </td>
                                    <td class="right-align"
                                        style="border-left: 1px solid black;border-right: 1px solid black;padding: 8px;text-align: right;">


                                    </td>


                                </tr>



                            <tr
                                style="background-color:#d3d3d3;font-weight: bold;">
                                <td style="border: 1px solid black;padding: 8px;text-align: left;" colspan="4">
                                    <span style="font-weight: bold;">DIFFERENCE TOTAL (
                                        <t t-esc="o.company_id.currency_id.name"/>
                                        )
                                    </span>
                                </td>
                                <td style="border: 1px solid black;padding: 8px;text-align: left;"
                                    class="right-align"></td>
                                <td style="border: 1px solid black;padding: 8px;text-align: right;" class="right-align">
                                    <span style="font-weight: bold;">
                                        <span t-esc="'{0:,.2f}'.format(o.credit_move_id.amount_untaxed-o.amount_untaxed)"/>

                                    </span>
                                </td>
                                <td style="border: 1px solid black;padding: 8px;text-align: left;"
                                    class="right-align"></td>
                                <td style="border: 1px solid black;padding: 8px;text-align: right;" class="right-align">
                                    <span style="font-weight: bold;">
                                        <span t-esc="'{0:,.2f}'.format(o.credit_move_id.amount_tax-o.amount_tax)"/>

                                    </span>
                                </td>
                                <td style="border: 1px solid black;padding: 8px;text-align: right;" class="right-align">
                                    <span style="font-weight: bold;">
                                        <span t-esc="'{0:,.2f}'.format(o.credit_move_id.amount_total-o.amount_total)"/>

                                    </span>
                                </td>
                            </tr>
                        </table>
                    </div>
                    <div style="background-color:#f0f0f0;text-align:left;margin-top:2px;">
                        <span style="font-weight: bold;">
                            <t t-esc="o.currency_id.amount_to_text(int(o.credit_move_id.amount_total-o.amount_total)).title().replace(',', '')"/>
                        </span>
                    </div>
                    <br/>
                    <div style="width:100%;font-size:14px;">
                        <table class="table-borderless" style="border: none; width: 100%;">
                            <tr>
                                <td style='border: none;text-align:left;border-top:none;border-bottom:none;width:25%;'>
                                    <span>Received by</span>
                                </td>
                                <td style='border: none;width:30%;'/>
                                <td style='border: none;text-align:right;width:45%;'>
                                    For
                                    <span style="font-weight: bold;">
                                        <t t-esc="o.company_id.name"/>
                                    </span>
                                </td>
                            </tr>
                        </table>
                    </div>
                    <br/>
                    <br/>
                    <table style="border: none; width: 100%;">
                        <tr>
                            <td style="border: none; text-align:left; width: 60%;vertical-align:top;">
                                <div style="font-size:14px;width:550px;">
                                    <div>
                                        <span style="font-weight: bold;">Payment Information</span>
                                    </div>
                                    <div>
                                        <span>All cheques and Drafts to be made payable to "
                                            <span style="font-weight: bold;font-size:13px;">
                                                <t t-esc="o.company_id.name"/>
                                                " ,
                                            </span>
                                        </span>
                                    </div>
                                    <div>
                                        <span>OR Wire Transfer to Bank Name:
                                            <t t-esc="o.partner_bank_id.bank_id.name"/>
                                            Branch:
                                            <span style="font-weight: bold;">
                                                <t t-esc="o.partner_bank_id.branch_id.name"/>
                                            </span>
                                            ,
                                            <span style="font-weight: bold;">A/c No.<t
                                                    t-esc="o.partner_bank_id.acc_number"/>,
                                            </span>
                                        </span>
                                    </div>
                                    <div>
                                        <span>A/c Type:
                                            <span style="font-weight: bold;">
                                                <t t-esc="o.partner_bank_id.account_type_id.name"/>
                                                (<t t-esc="o.currency_id.name"/>), IBAN:<t
                                                    t-esc="o.partner_bank_id.iban"/>, Swift Code:
                                                <t t-esc="o.partner_bank_id.bank_id.bic"/>
                                            </span>
                                        </span>
                                    </div>
                                </div>
                            </td>
                            <td style="border: none; text-align:right; width: 20%;vertical-align:top;">
                                <div t-foreach='o.dynamic_approve_request_ids' t-as='line'>
                                    <img t-if="line.approve_signature"
                                         t-att-src="image_data_uri(line.approve_signature)"
                                         style="height:80px;"/>
                                </div>
                            </td>
                            <td style="border: none; text-align:right; width: 20%;vertical-align:top;">
                                <t t-if="o.company_id.stamp">
                                    <img t-att-src="image_data_uri(o.company_id.stamp)" alt="ABRA Stamp"
                                         class="logo" style="height:140px;"/>
                                </t>
                            </td>
                        </tr>
                    </table>
                    <br/>
                </div>
            </t>
        </template>









    </data>
</odoo>