<?xml version="1.0" encoding="UTF-8" ?>
<odoo>
    <data>
        <template id="external_layout_standard_inherited">
            <div>
                <!--                <div class="pt-5">-->
                <!--                    &lt;!&ndash; This div ensures that the address is not cropped by the header. &ndash;&gt;-->
                <!--                    <t t-call="web.address_layout"/>-->
                <!--                </div>-->
                <t t-out="0"/>
            </div>

            <div t-attf-class="footer o_standard_footer o_company_#{company.id}_layout">
                <div>
                    <table class="table-borderless" style="border: none;">
                        <tr>
                            <td
                                style='border: none;text-align:left;border-top:none;border-bottom:none;'>
                                <img t-att-src="image_data_uri(o.company_id.logo)" alt="ABRA Logo" class="logo"
                                     style="height:80px;margin-top:25px;"/>
                            </td>
                            <td
                                style='border: none;text-align:right;font-size:15px;font-family:serif; width: 350px;'>
                                <div>
                                    <span style="font-weight: bold;font-size:13px;">
                                        <t t-esc="o.company_id.name"/>
                                    </span>
                                </div>
                                <div>
                                    <span>
                                        <t t-if="o.company_id.street">
                                            <t t-esc="o.company_id.street"/>
                                        </t>
                                        <t t-if="o.company_id.street2">
                                            <t t-esc="o.company_id.street2"/>
                                        </t>
                                        <t t-if="o.company_id.city">
                                            <t t-esc="o.company_id.city"/>
                                        </t>
                                    </span>
                                </div>
                                <div>
                                    <span>
                                        Post Box:
                                        <t t-esc="o.company_id.zip"/>
                                        <t t-esc="o.company_id.state_id.name"/>
                                        <t t-esc="o.company_id.country_id.name"/>
                                    </span>
                                </div>
                            </td>
                            <td style='border: none;text-align:right;'>
                                <span>
                                    <img alt="location"
                                         src="/abra_accounting_enhanecment/static/description/location.png"
                                         style="height:20px;margin-top:35px;"/>
                                </span>
                            </td>
                            <td
                                style='border: none;text-align:right;font-size:14px;font-family:"Segoe UI";line-height:1.8; width: 200px'>
                                <span>
                                    <t t-esc="o.company_id.email"/>
                                </span>
                                <br/>
                                <!--                            <span class="contact-icons">üìß</span>-->
                                <span>
                                    <t t-esc="o.company_id.phone"/>
                                </span>
                                <!--                            <i class="fa fa-solid fa-phone pe-2"/>-->
                                <br/>
                                <span>
                                    <t t-esc="o.company_id.mobile"/>
                                </span>
                                <br/>
                                <t t-if="o.company_id.website">
                                    <span>
                                        <t t-esc="o.company_id.website.replace('http://', '')"/>
                                    </span>
                                </t>
                                <!--                            <span class="contact-icons">üåê</span>-->
                            </td>
                            <td style='border: none;text-align:center;'>
                                <span>
                                    <img alt="email" src="/abra_accounting_enhanecment/static/description/email.png"
                                         style="height:18px;"/>
                                </span>
                                <span>
                                    <img alt="telephone"
                                         src="/abra_accounting_enhanecment/static/description/telephone.png"
                                         style="height:18px;"/>
                                </span>
                                <span>
                                    <img alt="phone" src="/abra_accounting_enhanecment/static/description/phone.png"
                                         style="height:18px;"/>
                                </span>
                                <span>
                                    <img alt="website" src="/abra_accounting_enhanecment/static/description/web.png"
                                         style="height:18px; margin: 6px 0px 0px 2px;"/>
                                </span>
                            </td>
                        </tr>
                    </table>
                </div>
                <div class="text-end" style="font-size:14px;">
                    <div>
                        Page:
                        <span class="page"/>
                        /
                        <span class="topage"/>
                    </div>
                </div>
            </div>
        </template>


        <template id="report_invoice_document_new_edit">
            <t t-set="o" t-value="o.with_context(lang=lang)"/>
            <t t-set="forced_vat"
               t-value="o.fiscal_position_id.foreign_vat"/>
            <t t-if="not o" t-set="o" t-value="doc"/>

            <t t-if="not company">
                <!-- Multicompany -->
                <t t-if="company_id">
                    <t t-set="company" t-value="company_id"/>
                </t>
                <t t-elif="o and 'company_id' in o and o.company_id.sudo()">
                    <t t-set="company" t-value="o.company_id.sudo()"/>
                </t>
                <t t-else="else">
                    <t t-set="company" t-value="res_company"/>
                </t>
            </t>
            <t t-call="abra_accounting_enhanecment.external_layout_standard_inherited">
                <!-- So that it appears in the footer of the report instead of the company VAT if it's set -->
                <!--            <table class="table-borderless" style="margin-left:20px;border: none; width: 100%;">-->
                <!--                <tr>-->
                <!--                    <td style='border: none;text-align:left;border-top:none;border-bottom:none;width:33%;'>-->
                <!--                    </td>-->
                <!--                    <td style='border: none;text-align:left;width:33%;padding-top:100px;'>-->
                <!--                        <h2 align="center">-->
                <!--                            TAX INVOICE-->
                <!--                        </h2>-->
                <!--                    </td>-->
                <!--                    <td style='border: none;text-align:left;width:33%;'>-->
                <!--                        <img t-att-src="image_data_uri(o.company_id.logo)" alt="ABRA Logo" class="logo"-->
                <!--                             style="height:100px;"/>-->
                <!--                    </td>-->
                <!--                </tr>-->
                <!--            </table>-->
                <div>
                    <h2 align="center">
                        TAX INVOICE
                    </h2>
                </div>
                <br/>
                <div class="page" style="font-family:'lato';">
                    <table class="table-borderless" style="border: none; width: 100%;">
                        <tr>
                            <td style='border: none;text-align:left; width: 40%;'>
                                <div>
                                    <spans style="font-weight: bold;">Bill To</spans>
                                </div>
                                <div style="font-weight: bold;">
                                    <span>
                                        <t t-esc="o.partner_id.parent_id.name or o.partner_id.name"/>
                                    </span>
                                </div>
                                <div>
                                    <t t-if="o.partner_id.parent_id">
                                        <span>
                                            <t t-esc="o.partner_id.parent_id.contact_address.replace(o.partner_id.parent_id.name,'')"/>
                                        </span>
                                    </t>
                                    <t t-else="">
                                        <span>
                                            <t t-esc="o.partner_id.contact_address.replace(o.partner_id.name,'')"/>
                                        </span>
                                    </t>
                                </div>
                                <div>
                                    <span>Tel #
                                        <t t-esc="o.partner_id.parent_id.phone or o.partner_id.phone"/>
                                    </span>
                                </div>
                                <div>
                                    <span>TRN:
                                        <t t-esc="o.partner_id.parent_id.trn or o.partner_id.trn"/>
                                    </span>
                                </div>
                                <br/>
                                <div>
                                    <span>
                                        Kind Attn:
                                        <t t-if="o.partner_id.parent_id">
                                            <span>
                                                <t t-esc="o.partner_id.name"/>
                                            </span>
                                        </t>
                                    </span>
                                </div>
                            </td>
                            <td style='border: none;text-align:left; width: 20%;'>
                            </td>
                            <td style='border: none;text-align:left; width: 40%;'>
                                <table style="width: 100%;border: 1px solid black;border-collapse: collapse;">
                                    <tr style='text-align:left;'>
                                        <td style="background-color:#d3d3d3;font-weight: bold;width: 50%;border: 1px solid black;">
                                            <span>INV #</span>
                                        </td>
                                        <td style="border: 1px solid black;">
                                            <span>
                                                <t t-esc="o.name"/>
                                            </span>
                                        </td>
                                    </tr>
                                    <tr style='text-align:left;'>
                                        <td style="background-color:#d3d3d3;font-weight: bold;width: 50%;border: 1px solid black;">
                                            <span>Date</span>
                                        </td>
                                        <td style="border: 1px solid black;">
                                            <t t-if="o.invoice_date">
                                                <span>
                                                    <t t-esc="o.invoice_date.strftime('%d-%m-%Y')"/>
                                                </span>
                                            </t>
                                        </td>
                                    </tr>
                                    <tr style='text-align:left;'>
                                        <td style="background-color:#d3d3d3;font-weight: bold;width: 50%;border: 1px solid black;">
                                            <span>Job#</span>
                                        </td>
                                        <td style="border: 1px solid black;">
                                            <span>
                                                <span>
                                                    <t t-esc="o.job"/>
                                                </span>
                                            </span>
                                        </td>
                                    </tr>
                                    <tr style='text-align:left;'>
                                        <td style="background-color:#d3d3d3;font-weight: bold;width: 50%;border: 1px solid black;">
                                            <span>TRN</span>
                                        </td>
                                        <td style="border: 1px solid black;">
                                            <span>
                                                <t t-esc="o.company_id.vat"/>
                                            </span>
                                        </td>
                                    </tr>
                                </table>

                            </td>
                        </tr>
                    </table>
                    <div style="width:100%;">
                        <table style="border: 1px solid black; text-align: center;width:100%;border-collapse: collapse;font-size:14px;">
                            <tr style="font-weight: bold;">
                                <th style="width:20%;background-color:#d3d3d3;border: 1px solid black;padding: 10px;">
                                    Internal Ref:
                                </th>
                                <th style="width:30%;background-color:#d3d3d3;border: 1px solid black;padding: 10px;">
                                    Order Ref:
                                </th>
                                <th style="width:25%;background-color:#d3d3d3;border: 1px solid black;padding: 10px;">
                                    Payment Terms
                                </th>
                                <th style="width:25%;background-color:#d3d3d3;border: 1px solid black;padding: 10px;">
                                    PROJECT
                                </th>
                            </tr>
                            <tr style="height:40px;">
                                <td style="border: 1px solid black;">
                                    <span>
                                        <t t-if="o.line_ids.sale_line_ids.order_id">
                                            <t t-esc="o.line_ids.sale_line_ids.order_id[0].name"/>
                                        </t>
                                    </span>
                                </td>
                                <td style="border: 1px solid black;">
                                    <span>
                                        <t t-esc="o.ref"/>
                                    </span>
                                </td>
                                <td style="border: 1px solid black;">
                                    <span>
                                        <t t-esc="o.invoice_payment_term_id.name"/>
                                    </span>
                                </td>
                                <td style="border: 1px solid black;">
                                    <span>
                                        <t t-esc="o.analytic_account_id.name"/>
                                    </span>
                                </td>
                            </tr>
                        </table>
                    </div>
                    <br/>
                    <div style="width:100%;">
                        <table style="width: 100%;border-collapse: collapse;width:100%;font-size:14px;">
                            <tr>
                                <th rowspan="2" class="center-align"
                                    style="border: 1px solid black;padding: 8px;text-align: center;background-color:#d3d3d3;width:7%;">
                                    Sl. #
                                </th>
                                <th rowspan="2" class="center-align"
                                    style="border: 1px solid black;padding: 8px;text-align: center;background-color:#d3d3d3;width:30%;">
                                    Description
                                </th>
                                <th rowspan="2" class="center-align"
                                    style="border: 1px solid black;padding: 8px;text-align: center;background-color:#d3d3d3;width:10%;">
                                    Claim
                                </th>
                                <th rowspan="2" class="center-align"
                                    style="border: 1px solid black;padding: 8px;text-align: center;background-color:#d3d3d3;width:8%;">
                                    Qty
                                </th>
                                <th rowspan="2" class="center-align"
                                    style="border: 1px solid black;padding: 8px;text-align: center;background-color:#d3d3d3;width:10%;">
                                    Rate
                                </th>
                                <th rowspan="2" class="center-align"
                                    style="border: 1px solid black;padding: 8px;text-align: center;background-color:#d3d3d3;width:10%;">
                                    Value
                                </th>
                                <th colspan="2" class="center-align"
                                    style="border: 1px solid black;padding: 8px;text-align: center;background-color:#d3d3d3;width:10%;">
                                    VAT
                                </th>
                                <th class="center-align"
                                    style="border: 1px solid black;padding: 8px;text-align: center;background-color:#d3d3d3;width:15%;">
                                    Total Value
                                </th>
                            </tr>
                            <tr>
                                <th class="center-align"
                                    style="border: 1px solid black;padding: 8px;text-align: center;background-color:#d3d3d3;">
                                    Rate
                                </th>
                                <th class="center-align"
                                    style="border: 1px solid black;padding: 8px;text-align: center;background-color:#d3d3d3;">
                                    Amount (<span t-field="o.currency_id.name"/>)
                                </th>
                                <th class="center-align"
                                    style="border: 1px solid black;padding: 8px;text-align: center;background-color:#d3d3d3;">
                                    Amount (<span t-field="o.currency_id.name"/>)
                                </th>
                            </tr>
                            <t t-set="index" t-value="1"/>
                            <t t-set="value" t-value="0"/>
                            <t t-set="vat_amount" t-value="0"/>
                            <t t-set="total_amount" t-value="0"/>
                            <t t-set="total_project_value" t-value="0"/>
                            <t t-set="vat_rate_name" t-value="Zero"/>
                            <t t-set="goods"
                               t-value="o.invoice_line_ids.filtered(lambda x : x.product_id.detailed_type == 'consu')"/>
                            <t t-set="services"
                               t-value="o.invoice_line_ids.filtered(lambda x : x.product_id.detailed_type == 'service')"/>
                            <t t-set="line_notes"
                               t-value="o.invoice_line_ids.filtered(lambda x : x.display_type == 'line_note')"/>
                            <t t-if="goods">
                                <tr>
                                    <td class="center-align"
                                        style="border-left: 1px solid black;border-right: 1px solid black;padding: 8px;text-align: center;">
                                        <t t-esc="index"/>
                                    </td>
                                    <td style="border-left: 1px solid black;border-right: 1px solid black;padding: 8px;text-align: left;font-size:13px;">
                                        Supply of Goods for
                                        <t t-esc="', '.join(goods.mapped('product_id.name'))"/>
                                        <!--                                    <br/>as per approved quote ref:-->
                                        <!--                                    <t t-if="o.line_ids.sale_line_ids.order_id">-->
                                        <!--                                        <t t-esc="o.line_ids.sale_line_ids.order_id[0].name"/>-->
                                        <!--                                    </t>-->
                                    </td>
                                    <td class="center-align"
                                        style="border-left: 1px solid black;border-right: 1px solid black;padding: 8px;text-align: center;">
                                        <t t-if="goods.mapped('claim_percentage')">
                                            <t t-esc="int(goods.mapped('claim_percentage')[0])"/>
                                            %
                                        </t>
                                    </td>
                                    <td class="center-align"
                                        style="border-left: 1px solid black;border-right: 1px solid black;padding: 8px;text-align: center;">
                                        <!--                                    <t t-esc="sum(goods.mapped('quantity'))"/>-->
                                        <span>1
                                            <t t-esc="goods.mapped('product_uom_id')[0].name"/>
                                        </span>
                                    </td>
                                    <td class="right-align"
                                        style="border-left: 1px solid black;border-right: 1px solid black;padding: 8px;text-align: right;">
                                        <t t-esc="'{:,}'.format(int(sum(goods.mapped('price_unit'))))"/>
                                    </td>
                                    <td class="right-align"
                                        style="border-left: 1px solid black;border-right: 1px solid black;padding: 8px;text-align: right;">
                                        <t t-esc="'{:,}'.format(int(sum(goods.mapped('price_subtotal'))))"/>
                                    </td>
                                    <td class="center-align"
                                        style="border-left: 1px solid black;border-right: 1px solid black;padding: 8px;text-align: right;">
                                        <t t-if="goods.filtered(lambda x: x.tax_ids)">
                                            <t t-set="vat_rate_name"
                                               t-value="goods.filtered(lambda x: x.tax_ids)[0].tax_ids.name"/>
                                            <t t-esc="int(goods.filtered(lambda x: x.tax_ids)[0].tax_ids.amount)"/>%
                                        </t>
                                        <t t-else="">
                                            0 %
                                        </t>
                                    </td>
                                    <td class="right-align"
                                        style="border-left: 1px solid black;border-right: 1px solid black;padding: 8px;text-align: right;">
                                        <t t-esc="'{:,}'.format(int(sum(goods.mapped('l10n_ae_vat_amount'))))"/>
                                    </td>
                                    <td class="right-align"
                                        style="border-left: 1px solid black;border-right: 1px solid black;padding: 8px;text-align: right;">
                                        <t t-esc="'{:,}'.format(int(sum(goods.mapped('price_total'))))"/>
                                    </td>
                                    <t t-set="index" t-value="index + 1"/>
                                    <t t-set="value" t-value="value + int(sum(goods.mapped('price_subtotal')))"/>
                                    <t t-set="vat_amount"
                                       t-value="vat_amount + sum(goods.mapped('l10n_ae_vat_amount'))"/>
                                    <t t-set="total_amount"
                                       t-value="int(total_amount) + int(sum(goods.mapped('price_total')))"/>
                                    <t t-set="total_project_value"
                                       t-value="total_project_value + int(sum(goods.mapped('price_subtotal')))"/>
                                </tr>

                            </t>
                            <t t-if="services">
                                <tr>
                                    <td class="center-align"
                                        style="border-left: 1px solid black;border-right: 1px solid black;padding: 8px;text-align: center;">
                                        <t t-esc="index"/>
                                    </td>
                                    <td style="border-left: 1px solid black;border-right: 1px solid black;padding: 8px;text-align: left;font-size:13px;">
                                        Supply of Services
                                        for
                                        <t t-esc="', '.join(services.mapped('product_id.name'))"/>
                                        <!--                                    <br/>as per approved quote ref:-->
                                        <!--                                    <t t-if="o.line_ids.sale_line_ids.order_id">-->
                                        <!--                                        <t t-esc="o.line_ids.sale_line_ids.order_id[0].name"/>-->
                                        <!--                                    </t>-->
                                    </td>
                                    <td class="center-align"
                                        style="border-left: 1px solid black;border-right: 1px solid black;padding: 8px;text-align: center;">
                                        <t t-if="services.mapped('claim_percentage')">
                                            <t t-esc="int(services.mapped('claim_percentage')[0])"/> %
                                        </t>
                                    </td>
                                    <td class="center-align"
                                        style="border-left: 1px solid black;border-right: 1px solid black;padding: 8px;text-align: center;">
                                        <!--                                    <t t-esc="sum(services.mapped('quantity'))"/>-->
                                        <span>1
                                            <t t-esc="services.mapped('product_uom_id')[0].name"/>
                                        </span>
                                    </td>
                                    <td class="right-align"
                                        style="border-left: 1px solid black;border-right: 1px solid black;padding: 8px;text-align: right;">
                                        <t t-esc="'{:,}'.format(int(sum(services.mapped('price_unit'))))"/>
                                    </td>
                                    <td class="right-align"
                                        style="border-left: 1px solid black;border-right: 1px solid black;padding: 8px;text-align: right;">
                                        <t t-esc="'{:,}'.format(int(sum(services.mapped('price_subtotal'))))"/>
                                    </td>
                                    <td class="center-align"
                                        style="border-left: 1px solid black;border-right: 1px solid black;padding: 8px;text-align: right;">
                                        <t t-if="services.filtered(lambda x: x.tax_ids)">
                                            <t t-set="vat_rate_name"
                                               t-value="services.filtered(lambda x: x.tax_ids)[0].tax_ids.name"/>
                                            <t t-esc="int(services.filtered(lambda x: x.tax_ids)[0].tax_ids.amount)"/>%
                                        </t>
                                        <t t-else="">
                                            0 %
                                        </t>
                                    </td>
                                    <td class="right-align"
                                        style="border-left: 1px solid black;border-right: 1px solid black;padding: 8px;text-align: right;">
                                        <t t-esc="'{:,}'.format(int(sum(services.mapped('l10n_ae_vat_amount'))))"/>
                                    </td>
                                    <td class="right-align"
                                        style="border-left: 1px solid black;border-right: 1px solid black;padding: 8px;text-align: right;">
                                        <t t-esc="'{:,}'.format(int(sum(services.mapped('price_total'))))"/>
                                    </td>
                                    <t t-set="index" t-value="index + 1"/>
                                    <t t-set="value" t-value="value + int(sum(services.mapped('price_subtotal')))"/>
                                    <t t-set="vat_amount"
                                       t-value="vat_amount + int(sum(services.mapped('l10n_ae_vat_amount')))"/>
                                    <t t-set="total_amount"
                                       t-value="total_amount + int(sum(services.mapped('price_total')))"/>
                                    <t t-set="total_project_value"
                                       t-value="total_project_value + int(sum(services.mapped('price_subtotal')))"/>
                                </tr>
                            </t>
                            <t t-if="line_notes">
                                <tr>
                                    <td class="center-align"
                                        style="border-right: 1px solid black;border-left: 1px solid black;border-top:none;border-bottom:none;padding: 8px;text-align: center;">
                                    </td>
                                    <td style="border-left: 1px solid black;border-right: 1px solid black;padding: 8px;text-align: left;font-size:13px;">
                                        Note:
                                        <t t-esc="', '.join(line_notes.mapped('name'))"/>
                                        <!--                                    <br/>as per approved quote ref:-->
                                        <!--                                    <t t-if="o.line_ids.sale_line_ids.order_id">-->
                                        <!--                                        <t t-esc="o.line_ids.sale_line_ids.order_id[0].name"/>-->
                                        <!--                                    </t>-->
                                    </td>
                                    <td class="center-align"
                                        style="border-right: 1px solid black;border-left: 1px solid black;border-top:none;border-bottom:none;padding: 8px;text-align: center;">

                                    </td>
                                    <td class="center-align"
                                        style="border-right: 1px solid black;border-left: 1px solid black;border-top:none;border-bottom:none;padding: 8px;text-align: center;">
                                    </td>
                                    <td class="right-align"
                                        style="border-right: 1px solid black;border-left: 1px solid black;border-top:none;border-bottom:none;padding: 8px;text-align: center;">
                                    </td>
                                    <td class="right-align"
                                        style="border-right: 1px solid black;border-left: 1px solid black;border-top:none;border-bottom:none;padding: 8px;text-align: center;">
                                    </td>
                                    <td class="center-align"
                                        style="border-right: 1px solid black;border-left: 1px solid black;border-top:none;border-bottom:none;padding: 8px;text-align: center;">
                                    </td>
                                    <td class="right-align"
                                        style="border-right: 1px solid black;border-left: 1px solid black;border-top:none;border-bottom:none;padding: 8px;text-align: center;">
                                    </td>
                                    <td class="right-align"
                                        style="border-right: 1px solid black;border-left: 1px solid black;border-top:none;border-bottom:none;padding: 8px;text-align: center;">
                                    </td>
                                </tr>
                            </t>
                            <tr>
                                <td style="border-left: 1px solid black;border-right: 1px solid black;padding: 8px;text-align: left;"></td>
                                <td style="border-left: 1px solid black;border-right: 1px solid black;padding: 8px;text-align: left;"
                                    width="35%">
                                    <span style="font-weight: bold; display: block;">Total Project Value
                                        <t t-esc="o.currency_id.name"/>
                                        <t t-esc="'{:,}'.format(int(total_project_value))"/>
                                        /-
                                    </span>
                                    <span style="display: block;">*VAT under
                                        <t t-esc="vat_rate_name"/>
                                        rated category
                                    </span>
                                    <span t-if="o.currency_id != o.company_id.currency_id">
                                        Conversion Rate
                                        <t t-esc="o.currency_id.name"/>
                                        to
                                        <t t-esc="o.company_id.currency_id.name"/>
                                        @
                                        <t t-esc="o.env['res.currency']._get_conversion_rate(o.currency_id, o.company_id.currency_id, o.company_id, o.invoice_date)"/>
                                    </span>
                                </td>
                                <td style="border-left: 1px solid black;border-right: 1px solid black;padding: 8px;text-align: left;"></td>
                                <td style="border-left: 1px solid black;border-right: 1px solid black;padding: 8px;text-align: left;"></td>
                                <td style="border-left: 1px solid black;border-right: 1px solid black;padding: 8px;text-align: left;"></td>
                                <td style="border-left: 1px solid black;border-right: 1px solid black;padding: 8px;text-align: left;"></td>
                                <td style="border-left: 1px solid black;border-right: 1px solid black;padding: 8px;text-align: left;"></td>
                                <td style="border-left: 1px solid black;border-right: 1px solid black;padding: 8px;text-align: left;"></td>
                                <td style="border-left: 1px solid black;border-right: 1px solid black;padding: 8px;text-align: left;"
                                    class="right-align"></td>
                            </tr>
                            <tr style="background-color:#d3d3d3;font-weight: bold;">
                                <td style="border: 1px solid black;padding: 8px;text-align: left;" colspan="4">
                                    <span style="font-weight: bold;">GRAND TOTAL (<t t-esc="o.currency_id.name"/>)
                                    </span>
                                </td>
                                <td style="border: 1px solid black;padding: 8px;text-align: left;"
                                    class="right-align"></td>
                                <td style="border: 1px solid black;padding: 8px;text-align: right;" class="right-align">
                                    <span style="font-weight: bold;">
                                        <t t-esc="'{:,}'.format(int(value))"/>
                                    </span>
                                </td>
                                <td style="border: 1px solid black;padding: 8px;text-align: left;"
                                    class="right-align"></td>
                                <td style="border: 1px solid black;padding: 8px;text-align: right;" class="right-align">
                                    <span style="font-weight: bold;">
                                        <t t-esc="'{:,}'.format(int(vat_amount))"/>
                                    </span>
                                </td>
                                <td style="border: 1px solid black;padding: 8px;text-align: right;" class="right-align">
                                    <span style="font-weight: bold;">
                                        <t t-esc="'{:,}'.format(int(total_amount))"/>
                                    </span>
                                </td>
                            </tr>
                            <tr t-if="o.currency_id != o.company_id.currency_id"
                                style="background-color:#d3d3d3;font-weight: bold;">
                                <td style="border: 1px solid black;padding: 8px;text-align: left;" colspan="4">
                                    <span style="font-weight: bold;">GRAND TOTAL (
                                        <t t-esc="o.company_id.currency_id.name"/>
                                        )
                                    </span>
                                </td>
                                <td style="border: 1px solid black;padding: 8px;text-align: left;"
                                    class="right-align"></td>
                                <td style="border: 1px solid black;padding: 8px;text-align: right;" class="right-align">
                                    <span style="font-weight: bold;">
                                        <t t-esc="'{:,}'.format(int(o.currency_id._convert(value, o.company_id.currency_id, o.company_id, o.invoice_date)))"/>
                                    </span>
                                </td>
                                <td style="border: 1px solid black;padding: 8px;text-align: left;"
                                    class="right-align"></td>
                                <td style="border: 1px solid black;padding: 8px;text-align: right;" class="right-align">
                                    <span style="font-weight: bold;">
                                        <t t-esc="'{:,}'.format(int(o.currency_id._convert(vat_amount, o.company_id.currency_id, o.company_id, o.invoice_date)))"/>
                                    </span>
                                </td>
                                <td style="border: 1px solid black;padding: 8px;text-align: right;" class="right-align">
                                    <span style="font-weight: bold;">
                                        <t t-esc="'{:,}'.format(int(o.currency_id._convert(total_amount, o.company_id.currency_id, o.company_id, o.invoice_date)))"/>
                                    </span>
                                </td>
                            </tr>
                        </table>
                    </div>
                    <div style="background-color:#f0f0f0;text-align:left;margin-top:2px;">
                        <span style="font-weight: bold;">
                            <t t-esc="o.currency_id.amount_to_text(int(total_amount)).title().replace(',', '')"/>
                        </span>
                    </div>
                    <br/>
                    <div style="width:100%;font-size:14px;">
                        <table class="table-borderless" style="border: none; width: 100%;">
                            <tr>
                                <td style='border: none;text-align:left;border-top:none;border-bottom:none;width:25%;'>
                                    <span>Received by</span>
                                </td>
                                <td style='border: none;width:30%;'/>
                                <td style='border: none;text-align:right;width:45%;'>
                                    For
                                    <span style="font-weight: bold;">
                                        <t t-esc="o.company_id.name"/>
                                    </span>
                                </td>
                            </tr>
                        </table>
                    </div>
                    <br/>
                    <br/>
                    <table style="border: none; width: 100%;">
                        <tr>
                            <td style="border: none; text-align:left; width: 60%;vertical-align:top;">
                                <div style="font-size:12px;width:500px;">
                                    <div>
                                        <span style="font-weight: bold;font-size:14px;">Payment Information</span>
                                    </div>
                                    <div>
                                        <span>All cheques and Drafts to be made payable to "
                                            <span style="font-weight: bold;">
                                                <t t-esc="o.company_id.name"/>
                                                " ,
                                            </span>
                                        </span>
                                    </div>
                                    <div>
                                        <span>OR Wire Transfer to Bank Name:
                                            <span style="font-weight: bold;">
                                                <t t-esc="o.partner_bank_id.bank_id.name"/>
                                            </span>
                                            Branch:
                                            <span style="font-weight: bold;">
                                                <t t-esc="o.partner_bank_id.branch_id.name"/>
                                            </span>
                                            ,
                                            <span style="font-weight: bold;">A/c No.<t
                                                    t-esc="o.partner_bank_id.acc_number"/>,
                                            </span>
                                        </span>
                                    </div>
                                    <div>
                                        <span>A/c Type:
                                            <span style="font-weight: bold;">
                                                <t t-esc="o.partner_bank_id.account_type_id.name"/>
                                                (<t t-esc="o.partner_bank_id.currency_id.name"/>), IBAN:<t
                                                    t-esc="o.partner_bank_id.iban"/>, Swift Code:
                                                <t t-esc="o.partner_bank_id.bank_id.bic"/>
                                            </span>
                                        </span>
                                    </div>
                                </div>
                            </td>
                            <td style="border: none; text-align:right; width: 20%;vertical-align:top;">
                                <div t-foreach='o.dynamic_approve_request_ids' t-as='line'>
                                    <img t-if="line.approve_signature"
                                         t-att-src="image_data_uri(line.approve_signature)"
                                         style="height:60px;"/>
                                </div>
                            </td>
                            <td style="border: none; text-align:right; width: 20%;vertical-align:top;">
                                <t t-if="o.company_id.stamp">
                                    <img t-att-src="image_data_uri(o.company_id.stamp)" alt="ABRA Stamp"
                                         class="logo" style="height:120px;"/>
                                </t>
                            </td>
                        </tr>
                    </table>
                    <br/>
                </div>
            </t>
        </template>

        <template id="report_invoice_new_edit">
            <t t-call="web.html_container">
                <t t-foreach="docs" t-as="o">
                    <t t-set="lang" t-value="o.partner_id.lang"/>
                    <t t-call="abra_accounting_enhanecment.report_invoice_document_new_edit" t-lang="lang"/>
                </t>
            </t>
        </template>

        <template id="report_invoice_new_edit_payment">
            <t t-call="abra_accounting_enhanecment.report_invoice_new_edit">
                <t t-set="print_with_payments" t-value="True"/>
            </t>
        </template>

        <record id="paperformat_invoice_custom" model="report.paperformat">
            <field name="name">Invoice Custom</field>
            <field name="default" eval="True"/>
            <field name="format">A4</field>
            <field name="page_height">0</field>
            <field name="page_width">0</field>
            <field name="orientation">Portrait</field>
            <field name="margin_top">10</field>
            <field name="margin_bottom">40</field>
            <field name="margin_left">7</field>
            <field name="margin_right">7</field>
            <field name="header_line" eval="False"/>
            <field name="header_spacing">35</field>
            <field name="dpi">90</field>
        </record>

        <record id="account.account_invoices" model="ir.actions.report">
            <field name="name">Invoices</field>
            <field name="model">account.move</field>
            <field name="report_type">qweb-pdf</field>
            <field name="report_name">abra_accounting_enhanecment.report_invoice_new_edit_payment</field>
            <field name="report_file">abra_accounting_enhanecment.report_invoice_new_edit_payment</field>
            <field name="print_report_name">(object._get_report_base_filename())</field>
            <field name="attachment"/>
            <field name="binding_model_id" ref="model_account_move"/>
            <field name="binding_type">report</field>
            <field name="paperformat_id" ref="abra_accounting_enhanecment.paperformat_invoice_custom"/>
            <field name="groups_id"
                   eval="[(4, ref('account.group_account_invoice')),(4, ref('account.group_account_readonly'))]"/>
        </record>
    </data>
</odoo>